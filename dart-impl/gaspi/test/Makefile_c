TEST_ROOT  = $(PWD)/../
DART_ROOT  = /home/cherold/dash-dart/dash-master-build
GTEST_ROOT = /home/cherold/procs/gtest
GTEST_INC  = $(GTEST_ROOT)/include
GTEST_LIB  = $(GTEST_ROOT)/lib/libgtest.a

CXXFLAGS    = -Wall --std=c++11 -c -ggdb -O0
LIB_DART  = -L$(DART_ROOT)/lib -ldart-gaspi
LIB_GASPI = -L$(GPI2_ROOT)/lib -libverbs -lpthread -lGPI2 -Wl,-rpath=$(GPI2_ROOT)/lib:
INCLUDE   = -I$(GPI2_ROOT)/include -I$(DART_ROOT)/include -I$(TEST_ROOT) -I$(GTEST_INC)

PROG = main

CXX = clang++

$(PROG):main.o
	$(CXX) $(FLAGS) -std=c++11 -o $@ main.o $(LIB_DART) $(LIB_GASPI) $(GTEST_LIB)

%.o:%.cpp
	$(CXX) $(FLAGS) $(CXXFLAGS) $(INCLUDE) $<

clean:
	rm -rf *~ \#_* *.o
	rm main
